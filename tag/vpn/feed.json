{
    "version": "https://jsonfeed.org/version/1",
    "title": "ネオンノワール • All posts by \"vpn\" tag",
    "description": "NeonNoir ブログ",
    "home_page_url": "https://blog.neonnoir.link",
    "items": [
        {
            "id": "https://blog.neonnoir.link/2024/08/13/0_100/15_CloudFlareVPN/",
            "url": "https://blog.neonnoir.link/2024/08/13/0_100/15_CloudFlareVPN/",
            "title": "使用CloudFlare作为VPN",
            "date_published": "2024-08-13T12:08:26.000Z",
            "content_html": "<h1 id=\"方式\"><a class=\"anchor\" href=\"#方式\">#</a> 方式</h1>\n<p>本文主要介绍以下两种方式</p>\n<ol>\n<li>CloudFlare 子服务 Warp (<a href=\"https://1.1.1.1/\">1.1.1.1</a>)</li>\n<li>使用 CloudFlare Workes 搭建 VPN 通道</li>\n</ol>\n<blockquote>\n<p>CLoudFlare 牛 bi！</p>\n</blockquote>\n<h1 id=\"1111\"><a class=\"anchor\" href=\"#1111\">#</a> 1.1.1.1</h1>\n<h2 id=\"下载\"><a class=\"anchor\" href=\"#下载\">#</a> 下载</h2>\n<p>点击<a href=\"https://1.1.1.1/\"> warp 官网</a>，下载对应设备的版本</p>\n<blockquote>\n<p>支持 Linux、MacOS、Windows、Android、IOS</p>\n</blockquote>\n<h2 id=\"使用\"><a class=\"anchor\" href=\"#使用\">#</a> 使用</h2>\n<blockquote>\n<p>本文使用 Windows 的 Warp 功能，其他设备也都差不多</p>\n</blockquote>\n<p>点击 设置 --&gt; 偏好设置 --&gt; 账户 --&gt; 使用其他密钥<br />\n<img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_02.png\" alt=\"02\" /><br />\n 这里可以使用我的密钥，或是自己生成一个 (下文)</p>\n<pre><code>6ECl4z19-y0M862qC-A7490TKI\n</code></pre>\n<h2 id=\"密钥生成\"><a class=\"anchor\" href=\"#密钥生成\">#</a> 密钥生成</h2>\n<p>需要 Telegram 账号，如果没有请注册一个</p>\n<blockquote>\n<p>Telegram 需要魔法上网，这里建议直接使用上面我提供的密钥即可</p>\n</blockquote>\n<p>Robot: <a href=\"https://t.me/generatewarpplusbot\">https://t.me/generatewarpplusbot</a><br />\n 添加机器人，并按如图所操作</p>\n<blockquote>\n<p>请注意！这里可能需要让你关注些群聊才能使用</p>\n</blockquote>\n<p><img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_03.png\" alt=\"03\" /><br />\n <code>7lnfW439-3yX5C4m6-CXd5943m</code>  就是我们生成的密钥了，接下来复制到 Warp 即可使用<br />\n<img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_04.png\" alt=\"04\" /></p>\n<h2 id=\"无法连接\"><a class=\"anchor\" href=\"#无法连接\">#</a> 无法连接</h2>\n<ol>\n<li><s>优选 IP</s> (Ipv4 基本失效)</li>\n<li>换 Ipv6</li>\n<li>开启 MASQUE 加密协议 (部分地区不可用)</li>\n</ol>\n<p><s>目前 (2024/08/13) Warp 在部分地区的 Ipv4 无法连接，最简单的解决方法就是切换为 Ipv6</s></p>\n<blockquote>\n<p>自己上网搜索一下如何开启 Ipv6，本文不作解释</p>\n</blockquote>\n<h3 id=\"masque-加密协议\"><a class=\"anchor\" href=\"#masque-加密协议\">#</a> MASQUE 加密协议</h3>\n<p>此方法需要最新的 <a href=\"https://1.1.1.1/\">Warp</a></p>\n<h4 id=\"cloudflare-zero-trust\"><a class=\"anchor\" href=\"#cloudflare-zero-trust\">#</a> Cloudflare Zero Trust</h4>\n<p>在设置中心，开启 MASQUE 加密</p>\n<h4 id=\"windows\"><a class=\"anchor\" href=\"#windows\">#</a> Windows</h4>\n<p>在 <code>C:\\ProgramData\\Cloudflare\\</code>  内，新建 <code>mdm.yml</code>  内容如下</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>&lt;dict<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    &lt;key<span class=\"token punctuation\">></span>warp_tunnel_protocol&lt;/key<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    &lt;string<span class=\"token punctuation\">></span>masque&lt;/string<span class=\"token punctuation\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>&lt;/dict<span class=\"token punctuation\">></span></pre></td></tr></table></figure><p>重启 Warp 即可开启 MASQUE</p>\n<h4 id=\"macos\"><a class=\"anchor\" href=\"#macos\">#</a> MacOS</h4>\n<p>下载并安装 <a href=\"https://wwqe.lanzouo.com/iLoHz2bo35de\">CloudflareWARP.mobileconfig</a> 文件，请确保客户端版本为最新 2024.8.309.1 或 更高的版本</p>\n<blockquote>\n<p>密码: ebjy</p>\n</blockquote>\n<h4 id=\"移动设备androidios\"><a class=\"anchor\" href=\"#移动设备androidios\">#</a> 移动设备 (Android,IOS)</h4>\n<p>高级 -&gt; 连接选项 -&gt; TunnelProtocol (连接隧道) -&gt; MASQUE</p>\n<blockquote>\n<p>如果以上方法都不行，请继续往下看</p>\n</blockquote>\n<h1 id=\"cloudflare-workes\"><a class=\"anchor\" href=\"#cloudflare-workes\">#</a> CloudFlare Workes</h1>\n<p>每天免费 10w 个请求，可以绑定自己的域名，可以访问外网，可以反代理外网的接口<br />\n这里选择的是 <code>yonggekkk</code>  的脚本<a href=\"https://github.com/yonggekkk/Cloudflare_vless_trojan\"> Cloudflare_vless_trojan</a></p>\n<blockquote>\n<p>原项目<a href=\"https://github.com/zizifn/edgetunnel\"> edgetunnel</a>、<s>改版<a href=\"https://github.com/3Kmfi6HP/EDtunnel\"> EDtunnel</a></s>、Trojan<a href=\"https://github.com/ca110us/epeius\">epeius</a><br />\n 选择<a href=\"https://github.com/yonggekkk/Cloudflare_vless_trojan\"> Cloudflare_vless_trojan</a> 的理由是将项目的优点都整合到了一起，并且有很多相关的解释对于小白来讲很友好。</p>\n</blockquote>\n<h2 id=\"前置条件\"><a class=\"anchor\" href=\"#前置条件\">#</a> 前置条件</h2>\n<ol>\n<li><a href=\"https://dash.cloudflare.com/\">CloudFlare</a></li>\n<li><a href=\"https://github.com/2dust/v2rayN/releases?after=3.10\">V2ray</a></li>\n<li>域名 (可选)</li>\n</ol>\n<h2 id=\"使用脚本\"><a class=\"anchor\" href=\"#使用脚本\">#</a> 使用脚本</h2>\n<p>下文以无域名操作<br />\n下面将以最简单的方式使用此脚本 (无域名操作)，更多扩展操作可看原项目</p>\n<blockquote>\n<p>有无域名的区别 --&gt; 有无 Tls</p>\n</blockquote>\n<h3 id=\"新建workers\"><a class=\"anchor\" href=\"#新建workers\">#</a> 新建 Workers</h3>\n<p>名字随意<br />\n<img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_05.png\" alt=\"05\" /><br />\n<img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_06.png\" alt=\"06\" /></p>\n<h3 id=\"添加脚本\"><a class=\"anchor\" href=\"#添加脚本\">#</a> 添加脚本</h3>\n<p>打开项目仓库中的<a href=\"https://github.com/yonggekkk/Cloudflare_vless_trojan/blob/main/Vless_workers_pages/_worker.js\"> Vless_workers_pages</a> 文件夹内找到 <code>_worker.js</code>  将里面的内容 <code>CTRL+A</code>  复制进刚才创建的 Workers 里<br />\n<img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_07.png\" alt=\"07\" /><br />\n<img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_08.png\" alt=\"08\" /></p>\n<h3 id=\"配置\"><a class=\"anchor\" href=\"#配置\">#</a> 配置</h3>\n<h4 id=\"userid\"><a class=\"anchor\" href=\"#userid\">#</a> userID</h4>\n<p>你应该确保有自己的 userID<br />\n 可以选择网上的<a href=\"https://www.uuidgenerator.net/\">在线生成</a>，或是在 V2 里的添加服务器内自动生成<br />\n<img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_09.png\" alt=\"09\" /></p>\n<h4 id=\"proxyip\"><a class=\"anchor\" href=\"#proxyip\">#</a> ProxyIP</h4>\n<p>这是全局代理 IP，选择默认的即可</p>\n<blockquote>\n<p>不会设别乱设，可能会导致无法进去 CloudFlare 相关的网站</p>\n</blockquote>\n<h3 id=\"运行\"><a class=\"anchor\" href=\"#运行\">#</a> 运行</h3>\n<p>然后点击右上角的部署保存<br />\n在 URL 中输入 <code>https://你的Workers名.你的用户名.workers.dev/你的UID</code></p>\n<blockquote>\n<p>如我的 <code>https://v2vpn.ui123456ax.workers.dev/a52c418e-a7d7-4d23-a348-1e055c1cb806</code></p>\n</blockquote>\n<p><img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_10.png\" alt=\"10\" title=\"默认关闭TLS\" /><br />\n 复制链接后，导入至 V2ray 即可正常使用。</p>\n<blockquote>\n<p>V2 节点这里就不分享给大家了，每个账户的请求数量是有限 10w 次的</p>\n</blockquote>\n<p><img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_11.png\" alt=\"11\" /><br />\n<img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_12.png\" alt=\"12\" /></p>\n<h3 id=\"无法打开workers\"><a class=\"anchor\" href=\"#无法打开workers\">#</a> 无法打开 Workers</h3>\n<blockquote>\n<p>如无此问题，跳过即可</p>\n</blockquote>\n<p>在上一步操作中无法打开输入的 <code>https://你的Workers名.你的用户名.workers.dev/你的UID</code>  链接<br />\n通常是因为 <code>.workers.dev</code>  被墙了，要么科学上网，要么手动开启 CF 节点</p>\n<h4 id=\"手动输入cf节点\"><a class=\"anchor\" href=\"#手动输入cf节点\">#</a> 手动输入 CF 节点</h4>\n<p>在 V2rayN 中添加 <code>VLESS</code>  服务器，并按如图所设置<br />\n<img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_13.png\" alt=\"13\" /><br />\n 设置完毕即可正常打开网页。这里是属于配置节点，可以正常科学上网了</p>\n<h3 id=\"其他代理工具\"><a class=\"anchor\" href=\"#其他代理工具\">#</a> 其他代理工具</h3>\n<p>在部署的 Workes 中可以看到，支持 Clash-meta、Sing-box 等链接导入</p>\n<blockquote>\n<p>导入时需保持科学环境，否则可能导致导入失败</p>\n</blockquote>\n<p><img loading=\"lazy\" data-src=\"https://gcore.jsdelivr.net/gh/ui123456ax/PicGo/Blog_images/15_/15_14.png\" alt=\"14\" /></p>\n<h2 id=\"tls\"><a class=\"anchor\" href=\"#tls\">#</a> TLS</h2>\n<p>未添加域名使用 TLS 加密，可以在代理工具内设置里启用分片 (Fragment)</p>\n<blockquote>\n<p>没有的话，请更换你的代理工具 (v2rayN)，或更新你的代理工具</p>\n</blockquote>\n<p>延迟 (ms) 默认显示是 <code>-1</code>  但可以使用 (速度由 Address 决定)</p>\n<blockquote>\n<p>需要显示为非 <code>-1</code>  则需要使用域名</p>\n</blockquote>\n<p>如果是 <code>其他项目里的脚本</code> 默认是开启 TLS，可手动关闭节点 TLS</p>\n<h2 id=\"地址address\"><a class=\"anchor\" href=\"#地址address\">#</a> 地址 (Address)</h2>\n<p>请注意你的服务器地址选项 这将会影响你是否可以上网 以及上网的速度 (下文优选 IP 有提)</p>\n<blockquote>\n<p>填入 IP 或 使用了 CloudFlare 加速的域名</p>\n</blockquote>\n<p>默认使用</p>\n<pre><code>www.visa.com.hk\nwww.visa.com.sg\nip.sb\n...\n</code></pre>\n<h2 id=\"proxyip-2\"><a class=\"anchor\" href=\"#proxyip-2\">#</a> ProxyIP</h2>\n<p>设置 ProxyIP 的作用，就是保证能与 CloudFlare 的连通。说白了，不设置 ProxyIP 将无法连接与 CloudFlare 相关的网站 (包括使用了 CFCDN 的网站)，不影响上网速度。一般情况默认即可 (非空)，无需修改。</p>\n<pre><code>cdn-all.xn--b6gac.eu.org\ncdn.xn--b6gac.eu.org\ncdn-b100.xn--b6gac.eu.org\nedgetunnel.anycast.eu.org\ncdn.anycast.eu.org\n</code></pre>\n<h2 id=\"优选ip域名\"><a class=\"anchor\" href=\"#优选ip域名\">#</a> 优选 IP (域名)</h2>\n<p>不管你是使用哪个项目的代码搭建 CloudFlareV2ray 渠道，都应该要注意地址 (address)，这将影响全局上网的速度。</p>\n<ol>\n<li>CloudFlare 优选官方 IP --&gt; <a href=\"https://github.com/yonggekkk/Cloudflare_vless_trojan/blob/main/CF%E4%BC%98%E9%80%89%E5%AE%98%E6%96%B9IP(%E7%94%B5%E8%84%91%E7%89%88).zip\">下载</a></li>\n</ol>\n<blockquote>\n<p>速度一般 节点稳定 IP 地域大部分为美国</p>\n</blockquote>\n<ol start=\"2\">\n<li>CloudFlare 优选反代 IP --&gt; <a href=\"https://github.com/yonggekkk/Cloudflare_vless_trojan/blob/main/CF%E4%BC%98%E9%80%89%E5%8F%8D%E4%BB%A3IP(%E7%94%B5%E8%84%91%E7%89%88).zip\">下载</a></li>\n</ol>\n<blockquote>\n<p>速度快 不稳定容易失效 IP 地域可根据节点选择</p>\n</blockquote>\n<ol start=\"3\">\n<li>CloudFlare 优选域名 (官方、反代) --&gt; <a href=\"https://github.com/yonggekkk/Cloudflare_vless_trojan/blob/main/CDN%E4%BC%98%E9%80%89%E5%9F%9F%E5%90%8DV23.8.18(%E7%94%B5%E8%84%91win64).exe\">下载</a></li>\n</ol>\n<blockquote>\n<p>IP 会随意变动</p>\n</blockquote>\n<h3 id=\"androidios\"><a class=\"anchor\" href=\"#androidios\">#</a> Android&amp;&amp;IOS</h3>\n<p>Android 使用程序 <code>termux</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 安装依赖</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>pkg upgrade</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>pkg <span class=\"token function\">install</span> <span class=\"token function\">curl</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># apt update</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># apt install curl</span></pre></td></tr></table></figure><p>IOS 使用程序 <code>ish</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 安装依赖</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>apk <span class=\"token function\">add</span> openssh <span class=\"token function\">curl</span> <span class=\"token function\">bash</span></pre></td></tr></table></figure><figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 优选域名</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-sSL</span> https://gitlab.com/rwkgyg/CFwarp/raw/main/point/CFcdnym.sh <span class=\"token parameter variable\">-o</span> CFcdnym.sh <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">chmod</span> +x CFcdnym.sh <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">bash</span> CFcdnym.sh</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 优选 IP</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-sSL</span> https://gitlab.com/rwkgyg/CFwarp/raw/main/point/cfip.sh <span class=\"token parameter variable\">-o</span> cfip.sh <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">chmod</span> +x cfip.sh <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">bash</span> cfip.sh</pre></td></tr></table></figure><h3 id=\"抓取反代ip\"><a class=\"anchor\" href=\"#抓取反代ip\">#</a> 抓取反代 IP</h3>\n<p>可利用网络空间检索抓取有 CF 加速的网站<br />\n FOFA  <code>server==&quot;cloudflare&quot; &amp;&amp; port==&quot;端口&quot; &amp;&amp; country==&quot;国家&quot;</code></p>\n<p>CloudFlare 支持的 13 个端口号</p>\n<details><summary>HTTP端口(7个)</summary><div>\n<ul>\n<li>80</li>\n<li>8080</li>\n<li><strong>8880</strong></li>\n<li>2052</li>\n<li>2082</li>\n<li>2086</li>\n<li>2095</li>\n</ul>\n</div></details>\n<details><summary>HTTPS端口(6个)</summary><div>\n<ul>\n<li>443</li>\n<li>2053</li>\n<li>2083</li>\n<li>2087</li>\n<li>2096</li>\n<li><strong>8443</strong></li>\n</ul>\n</div></details>\n<h3 id=\"区别\"><a class=\"anchor\" href=\"#区别\">#</a> 区别</h3>\n<ul>\n<li>域名：优选域名里包含许多优选 IP，并使用其中的一条 IP 作为连接 CloudFlare 的通道</li>\n<li>IP: 优选 IP 则是指定唯一的 IP，这将可以选择 VPN 所在的代理位置</li>\n</ul>\n<blockquote>\n<p>一般情况选择优选域名即可</p>\n</blockquote>\n<h1 id=\"结语\"><a class=\"anchor\" href=\"#结语\">#</a> 结语</h1>\n<p>无论是所以 Warp 服务还是自建 Workes，其根 IP 都是 CloudFlare，其速度也相差无几。</p>\n<blockquote>\n<p>速度的差异主要还是在与 CloudFlare 的连接</p>\n</blockquote>\n<hr />\n<p><a href=\"https://www.youtube.com/watch?v=ojGojtF8sW8&amp;t=1471s\">https://www.youtube.com/watch?v=ojGojtF8sW8&amp;t=1471s</a><br />\n<a href=\"https://www.youtube.com/watch?v=NbruiJShUCE\">https://www.youtube.com/watch?v=NbruiJShUCE</a><br />\n<a href=\"https://www.youtube.com/watch?v=FE_gJrk2sSc&amp;t=812s\">https://www.youtube.com/watch?v=FE_gJrk2sSc&amp;t=812s</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=NaLd-orwFUE\">https://www.youtube.com/watch?v=NaLd-orwFUE</a><br />\n<a href=\"https://www.youtube.com/watch?v=9V9CQxmfwoA\">https://www.youtube.com/watch?v=9V9CQxmfwoA</a></p>\n<p><a href=\"https://github.com/yonggekkk/warp-yg\">https://github.com/yonggekkk/warp-yg</a></p>\n<p><a href=\"https://github.com/yonggekkk/Cloudflare_vless_trojan\">https://github.com/yonggekkk/Cloudflare_vless_trojan</a><br />\n<a href=\"https://github.com/zizifn/edgetunnel\">https://github.com/zizifn/edgetunnel</a><br />\n<a href=\"https://github.com/3Kmfi6HP/EDtunnel\">https://github.com/3Kmfi6HP/EDtunnel</a> 已删库<br />\n<a href=\"https://github.com/EDtunnel-rev/EDtunnel-rev\"> https://github.com/EDtunnel-rev/EDtunnel-rev</a><br />\n<a href=\"https://github.com/ca110us/epeius\">https://github.com/ca110us/epeius</a></p>\n<p><a href=\"https://github.com/XIU2/CloudflareSpeedTest\">https://github.com/XIU2/CloudflareSpeedTest</a><br />\n<a href=\"https://github.com/badafans/Cloudflare-IP-SpeedTest\">https://github.com/badafans/Cloudflare-IP-SpeedTest</a></p>\n",
            "tags": [
                "CloudFlare",
                "VPN"
            ]
        }
    ]
}