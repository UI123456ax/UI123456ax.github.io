<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://blog.neonnoir.link</id>
    <title>ネオンノワール • Posts by &#34;dns&#34; tag</title>
    <link href="https://blog.neonnoir.link" />
    <updated>2025-11-01T01:56:10.000Z</updated>
    <category term="Notes" />
    <category term="Blog" />
    <category term="Shoka" />
    <category term="Github" />
    <category term="Python" />
    <category term="Debug" />
    <category term="Configuration" />
    <category term="Comic" />
    <category term="Games" />
    <category term="Android" />
    <category term="CloudFlare" />
    <category term="VPN" />
    <category term="Domain" />
    <category term="Cloudflare" />
    <category term="Docker" />
    <category term="DNS" />
    <entry>
        <id>https://blog.neonnoir.link/2025/11/01/0_100/21_%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/</id>
        <title>域名解析及其应用</title>
        <link rel="alternate" href="https://blog.neonnoir.link/2025/11/01/0_100/21_%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E5%8F%8A%E5%85%B6%E5%BA%94%E7%94%A8/"/>
        <content type="html">&lt;h1 id=&#34;核心记录类型&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#核心记录类型&#34;&gt;#&lt;/a&gt; 核心记录类型&lt;/h1&gt;
&lt;p&gt;DNS 管理界面：“主机记录”（Host/Name）、“记录类型”（Type）、“记录值”（Value/Points to）、“TTL”&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:left&#34;&gt;记录类型&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;主机记录 (Host)&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;记录值 (Value)&lt;/th&gt;
&lt;th style=&#34;text-align:left&#34;&gt;用途&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;A&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;www&lt;/code&gt; ,  &lt;code&gt;@&lt;/code&gt; ,  &lt;code&gt;blog&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;一个 IPv4 地址 (如  &lt;code&gt;1.2.3.4&lt;/code&gt; )&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;指向服务器 IP&lt;/strong&gt;：将域名指向你的网站或服务器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;AAAA&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;www&lt;/code&gt; ,  &lt;code&gt;@&lt;/code&gt; ,  &lt;code&gt;ipv6&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;一个 IPv6 地址&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;指向 IPv6 地址&lt;/strong&gt;：功能同 A 记录，用于支持 IPv6 的服务器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;CNAME&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;www&lt;/code&gt; ,  &lt;code&gt;mail&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;另一个域名 (如  &lt;code&gt;pages.github.io&lt;/code&gt; )&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;设置别名&lt;/strong&gt;：将一个域名指向另一个域名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;MX&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;@&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;10 mx1.example.com.&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;设置邮箱服务器&lt;/strong&gt;： &lt;code&gt;10&lt;/code&gt;  是优先级（数字越小越高）。可设置多条，实现主备邮箱服务器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;TXT&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;@&lt;/code&gt; ,  &lt;code&gt;_dmarc&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;文本字符串&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;验证与策略&lt;/strong&gt;：常用于 SPF（防邮件伪造）、DKIM（邮件签名）、DMARC 和域名所有权验证&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;NS&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;blog&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;ns1.otherprovider.com.&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;委派子域名&lt;/strong&gt;：将子域名的解析管理权交给其他 DNS 服务商。常用于部门或服务独立管理其域名&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;SRV&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;_minecraft._tcp.play&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;10 5 25565 server.example.com.&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;指定服务端口&lt;/strong&gt;：为特定服务（如 Minecraft、SIP）指定服务器和端口。格式为  &lt;code&gt;优先级 权重 端口 目标&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;CAA&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;@&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;0 issue &amp;quot;letsencrypt.org&amp;quot;&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;限制证书颁发机构&lt;/strong&gt;：为提高安全，只允许指定的 CA 为你的域名颁发 SSL 证书&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;PTR&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;1.1.168.192.in-addr.arpa&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;mail.example.com.&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;反向解析 (IP -&amp;gt; 域名)&lt;/strong&gt;：主要用于邮件服务器反向检查&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;ALIAS / ANAME&lt;/strong&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;@&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;code&gt;some-service.provider.com&lt;/code&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:left&#34;&gt;&lt;strong&gt;根域名别名 (非标)&lt;/strong&gt;：类似 CNAME 但可用于根域名。这是 DNS 服务商提供的特殊功能（如 Cloudflare 的 CNAME Flattening），用于将根域名指向另一个域名&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;注意：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;@&lt;/code&gt;  代表根域名（如  &lt;code&gt;example.com&lt;/code&gt; ）&lt;/li&gt;
&lt;li&gt;根域名 ( &lt;code&gt;@&lt;/code&gt; ) 通常不能设置  &lt;code&gt;CNAME&lt;/code&gt;  记录&lt;/li&gt;
&lt;li&gt;&lt;code&gt;PTR&lt;/code&gt;  通常在你的 IP 提供商（云服务商 / IDC）处配置，而非域名 DNS 服务商处&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;域名与服务器&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#域名与服务器&#34;&gt;#&lt;/a&gt; 域名与服务器&lt;/h1&gt;
&lt;h2 id=&#34;部署网站&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#部署网站&#34;&gt;#&lt;/a&gt; 部署网站&lt;/h2&gt;
&lt;p&gt;假设服务器 IP 是  &lt;code&gt;100.107.102.101&lt;/code&gt; ，域名是  &lt;code&gt;mydomain.com&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;例：让  &lt;code&gt;mydomain.com&lt;/code&gt;  和  &lt;code&gt;www.mydomain.com&lt;/code&gt;  都能访问网站&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;设置根域名&lt;/strong&gt;：添加 A 记录&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主机记录:  &lt;code&gt;@&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录类型:  &lt;code&gt;A&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录值:  &lt;code&gt;100.107.102.101&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;设置 www 子域名&lt;/strong&gt;：添加 CNAME 记录，将其指向根域名&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;主机记录:  &lt;code&gt;www&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录类型:  &lt;code&gt;CNAME&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录值:  &lt;code&gt;mydomain.com&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;未来更换服务器 IP 时，只需修改 A 记录， &lt;code&gt;www&lt;/code&gt;  会自动跟随变化&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;反向代理端口映射&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#反向代理端口映射&#34;&gt;#&lt;/a&gt; 反向代理：端口映射&lt;/h2&gt;
&lt;p&gt;标准的 DNS 记录（A 记录）只能将域名指向 IP 地址，不能直接指定端口。&lt;br /&gt;
想让域名映射端口，最正确的做法是配置一个 Web 服务器（Nginx 或 Apache）&lt;/p&gt;
&lt;p&gt;例：将域名（ &lt;code&gt;service.mydomain.com&lt;/code&gt; ）指向服务器  &lt;code&gt;8080&lt;/code&gt;  端口&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;DNS 设置&lt;/strong&gt;：添加 A 记录，将域名指向服务器 IP 地址
&lt;ul&gt;
&lt;li&gt;主机记录： &lt;code&gt;service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录类型： &lt;code&gt;A&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录值： &lt;code&gt;你的服务器IP&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;服务器配置&lt;/strong&gt;（以 Nginx 为例）
&lt;ul&gt;
&lt;li&gt;当收到访问  &lt;code&gt;service.mydomain.com&lt;/code&gt;  的请求时，Nginx 会把这个请求转发到你服务器上运行在特定端口（比如 8080）的那个应用&lt;/li&gt;
&lt;li&gt;
&lt;blockquote&gt;
&lt;p&gt;Nginx 监听标准的 &lt;strong&gt;80/443&lt;/strong&gt; 端口&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;简单的 Nginx 配置：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf&#34;&gt;server &amp;#123;
    listen 80;
    server_name service.mydomain.com;

    location / &amp;#123;
        # 将所有请求转发到本机的 8080 端口
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    &amp;#125;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;当用户通过浏览器访问时，会默认使用 80 (HTTP) 或 443 (HTTPS) 端口&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;反向代理代理镜像&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#反向代理代理镜像&#34;&gt;#&lt;/a&gt; 反向代理：代理镜像&lt;/h2&gt;
&lt;p&gt;用户通过访问 Nginx 服务器来访问目标网站，而目标网站的内容会被代理到指定的域名下&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;DNS 配置同上同理&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;配置示例&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#配置示例&#34;&gt;#&lt;/a&gt; 配置示例&lt;/h3&gt;
&lt;p&gt;以下是一个 Nginx 的配置示例，将请求转发到不同的后端服务：&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-conf&#34;&gt;server &amp;#123;
    listen 80;
    server_name your-domain.com;  # 你的域名
  
    location / &amp;#123;
        # 目标网站地址
        proxy_pass https://target-website.com;
      
        # 设置代理头信息
        proxy_set_header Host target-website.com;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header User-Agent $http_user_agent;
        proxy_set_header Accept-Encoding &amp;quot;&amp;quot;;
      
        # 禁用缓存以便实时镜像
        proxy_buffering off;
      
        # 超时设置
        proxy_connect_timeout 30s;
        proxy_read_timeout 30s;
    &amp;#125;
&amp;#125;
&lt;/code&gt;&lt;/pre&gt;
&lt;h1 id=&#34;dns-高级配置&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#dns-高级配置&#34;&gt;#&lt;/a&gt; DNS 高级配置&lt;/h1&gt;
&lt;h2 id=&#34;ns-记录-委派子域名管理权&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#ns-记录-委派子域名管理权&#34;&gt;#&lt;/a&gt; NS 记录 - 委派子域名管理权&lt;/h2&gt;
&lt;p&gt;例：将  &lt;code&gt;blog.mydomain.com&lt;/code&gt;  这个子域名交给另一个解析平台或服务来管理（例如 CloudDns 双向解析至 CloudFlare）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;操作&lt;/strong&gt;：在  &lt;code&gt;mydomain.com&lt;/code&gt;  的 DNS 设置中，添加 NS 记录
&lt;ul&gt;
&lt;li&gt;主机记录:  &lt;code&gt;blog&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录类型:  &lt;code&gt;NS&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录值:  &lt;code&gt;ns1.otherprovider.com&lt;/code&gt;  (对方提供的 DNS 服务器地址)&lt;/li&gt;
&lt;li&gt;
&lt;blockquote&gt;
&lt;p&gt;通常需要添加至少两条 NS 记录&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;效果&lt;/strong&gt;：之后所有  &lt;code&gt;blog.mydomain.com&lt;/code&gt;  及其下级域名（如  &lt;code&gt;posts.blog.mydomain.com&lt;/code&gt; ）的解析请求，都会被导向  &lt;code&gt;ns1.otherprovider.com&lt;/code&gt;  去处理&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;根域名同理，将主机记录替换为  &lt;code&gt;@&lt;/code&gt;  即可&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;srv-记录-指定服务端口&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#srv-记录-指定服务端口&#34;&gt;#&lt;/a&gt; SRV 记录 - 指定服务端口&lt;/h2&gt;
&lt;p&gt;例：配置 Minecraft 服务器或其他需要指定端口的服务&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;格式&lt;/strong&gt;： &lt;code&gt;_服务._协议.主机记录&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;示例&lt;/strong&gt;：为  &lt;code&gt;play.mydomain.com&lt;/code&gt;  配置 Minecraft 服务
&lt;ul&gt;
&lt;li&gt;主机记录:  &lt;code&gt;_minecraft._tcp.play&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录类型:  &lt;code&gt;SRV&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录值 / 数据:  &lt;code&gt;10 5 25565 server.mydomain.com.&lt;/code&gt;  (优先级 权重 端口 目标主机)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;解释&lt;/strong&gt;：客户端连接  &lt;code&gt;play.mydomain.com&lt;/code&gt;  时，会自动查找此 SRV 记录，并连接到  &lt;code&gt;server.mydomain.com&lt;/code&gt;  的  &lt;code&gt;25565&lt;/code&gt;  端口&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;SRV 记录可以指定服务的端口，但是绝大多数 Web 浏览器不支持通过 SRV 记录来访问网站&lt;/strong&gt;&lt;br /&gt;
 SRV 记录主要用于特定协议的客户端自动发现服务，例如 Minecraft 游戏、VoIP 电话 (SIP)、邮件或即时通讯 (XMPP) 等，不适用于通用的 Web 访问&lt;br /&gt;
对于网站或 Web 应用，更多的是使用反向代理&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;caa-记录-限制-ssl-证书颁发机构&#34;&gt;&lt;a class=&#34;anchor&#34; href=&#34;#caa-记录-限制-ssl-证书颁发机构&#34;&gt;#&lt;/a&gt; CAA 记录 - 限制 SSL 证书颁发机构&lt;/h2&gt;
&lt;p&gt;例：为提高安全性，只允许 Let&#39;s Encrypt 为你的域名颁发证书&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;操作&lt;/strong&gt;：添加 CAA 记录
&lt;ul&gt;
&lt;li&gt;主机记录:  &lt;code&gt;@&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录类型:  &lt;code&gt;CAA&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;记录值 / 数据:  &lt;code&gt;0 issue &amp;quot;letsencrypt.org&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;效果&lt;/strong&gt;：其他 CA（证书颁发机构）在检查时会看到此记录，并拒绝为你的域名颁发证书&lt;/li&gt;
&lt;/ul&gt;
</content>
        <category term="Domain" />
        <category term="DNS" />
        <updated>2025-11-01T01:56:10.000Z</updated>
    </entry>
</feed>
